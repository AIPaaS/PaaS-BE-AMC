<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ai.amc.core.dao.mapper.TrendsMapper" >
  <resultMap id="BaseResultMap" type="com.ai.amc.core.po.Trends" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="itemid" property="itemid" jdbcType="BIGINT" />
    <id column="clock" property="clock" jdbcType="INTEGER" />
    <result column="num" property="num" jdbcType="INTEGER" />
    <result column="value_min" property="valueMin" jdbcType="DOUBLE" />
    <result column="value_avg" property="valueAvg" jdbcType="DOUBLE" />
    <result column="value_max" property="valueMax" jdbcType="DOUBLE" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    itemid, clock, num, value_min, value_avg, value_max
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="com.ai.amc.core.po.TrendsKey" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from trends
    where itemid = #{itemid,jdbcType=BIGINT}
      and clock &lt;= #{clock_end,jdbcType=INTEGER}
      and clock &gt;= #{clock_begin,jdbcType=INTEGER}
      and MOD(hour(FROM_UNIXTIME(clock,'%Y-%m-%d %H:%i:%s')),#{interval,jdbcType=INTEGER})=0 ORDER BY clock
  </select>
  
</mapper>